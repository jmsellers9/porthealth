<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PortHealth DSM - Maritime Health Declaration System</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-blue: #0056b3;
            --secondary-blue: #003d82;
            --accent-green: #28a745;
            --accent-red: #dc3545;
            --accent-yellow: #ffc107;
            --light-blue: #e3f2fd;
            --dark-blue: #00264d;
            --gray-light: #f8f9fa;
            --gray-medium: #6c757d;
            --gray-dark: #343a40;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(rgba(0, 45, 100, 0.85), rgba(0, 45, 100, 0.9)), 
                        url('https://images.unsplash.com/photo-1552465011-b4e30bf7349d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1920&q=80');
            background-size: cover;
            background-attachment: fixed;
            background-position: center;
            color: var(--gray-light);
            line-height: 1.6;
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        /* Animation Classes */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes fadeInLeft {
            from {
                opacity: 0;
                transform: translateX(-30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        @keyframes fadeInRight {
            from {
                opacity: 0;
                transform: translateX(30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        @keyframes pulse {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
            100% {
                transform: scale(1);
            }
        }
        
        @keyframes float {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-10px);
            }
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-100%);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        .animate-fade-in-up {
            animation: fadeInUp 0.8s ease forwards;
        }
        
        .animate-fade-in-down {
            animation: fadeInDown 0.8s ease forwards;
        }
        
        .animate-fade-in-left {
            animation: fadeInLeft 0.8s ease forwards;
        }
        
        .animate-fade-in-right {
            animation: fadeInRight 0.8s ease forwards;
        }
        
        .animate-pulse {
            animation: pulse 2s infinite;
        }
        
        .animate-float {
            animation: float 3s ease-in-out infinite;
        }
        
        .animate-slide-in {
            animation: slideIn 0.8s ease forwards;
        }
        
        .container {
            max-width: 1300px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* Header Styles */
        header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 1.2rem 0;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
            animation: fadeInDown 0.8s ease;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo-section {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .logo-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--primary-blue), var(--dark-blue));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.8rem;
            box-shadow: 0 4px 15px rgba(0, 86, 179, 0.3);
            animation: pulse 3s infinite;
        }
        
        .logo-text h1 {
            font-family: 'Montserrat', sans-serif;
            font-size: 1.8rem;
            color: var(--dark-blue);
            font-weight: 700;
            margin-bottom: 5px;
        }
        
        .logo-text p {
            font-size: 0.9rem;
            color: var(--gray-medium);
            font-weight: 500;
        }
        
        .contact-info {
            display: flex;
            gap: 30px;
            align-items: center;
        }
        
        .contact-item {
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--dark-blue);
            font-weight: 500;
        }
        
        .contact-item i {
            color: var(--primary-blue);
            font-size: 1.2rem;
        }
        
        .contact-item a {
            color: var(--dark-blue);
            text-decoration: none;
            transition: color 0.3s;
        }
        
        .contact-item a:hover {
            color: var(--primary-blue);
        }
        
        /* Welcome Section */
        .welcome-section {
            background: rgba(255, 255, 255, 0.95);
            color: var(--dark-blue);
            padding: 50px;
            margin: 30px auto;
            border-radius: 20px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.1);
            animation: fadeInUp 1s ease;
            border-left: 8px solid var(--accent-green);
            border-right: 8px solid var(--primary-blue);
        }
        
        .welcome-section h2 {
            font-family: 'Montserrat', sans-serif;
            font-size: 2.2rem;
            margin-bottom: 20px;
            color: var(--dark-blue);
            text-align: center;
        }
        
        .welcome-section p {
            font-size: 1.1rem;
            margin-bottom: 15px;
            line-height: 1.7;
            color: var(--gray-dark);
        }
        
        .welcome-highlight {
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            padding: 25px;
            border-radius: 15px;
            margin: 25px 0;
            border: 3px solid var(--primary-blue);
            animation: pulse 3s infinite;
        }
        
        .welcome-highlight h3 {
            font-family: 'Montserrat', sans-serif;
            font-size: 1.5rem;
            margin-bottom: 15px;
            color: var(--dark-blue);
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        /* IHR Compliance Section */
        .ihr-section {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(240, 255, 240, 0.95));
            color: var(--dark-blue);
            padding: 40px;
            margin: 30px auto;
            border-radius: 20px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.1);
            animation: fadeInUp 1s ease;
            border-top: 6px solid var(--accent-green);
        }
        
        .ihr-section h3 {
            font-family: 'Montserrat', sans-serif;
            font-size: 1.8rem;
            margin-bottom: 25px;
            color: var(--dark-blue);
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .ihr-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin-top: 20px;
        }
        
        .ihr-card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
            border-top: 4px solid var(--primary-blue);
            animation: fadeInUp 0.8s ease forwards;
            opacity: 0;
        }
        
        .ihr-card:nth-child(1) { animation-delay: 0.1s; }
        .ihr-card:nth-child(2) { animation-delay: 0.2s; }
        .ihr-card:nth-child(3) { animation-delay: 0.3s; }
        .ihr-card:nth-child(4) { animation-delay: 0.4s; }
        
        .ihr-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.15);
        }
        
        .ihr-card i {
            font-size: 2.5rem;
            color: var(--primary-blue);
            margin-bottom: 20px;
        }
        
        .ihr-card h4 {
            font-family: 'Montserrat', sans-serif;
            font-size: 1.4rem;
            margin-bottom: 15px;
            color: var(--dark-blue);
        }
        
        .ihr-card p {
            font-size: 1rem;
            color: var(--gray-dark);
            line-height: 1.6;
        }
        
        /* Guidelines Banner */
        .guidelines-banner {
            background: linear-gradient(135deg, var(--accent-yellow), #e0a800);
            color: var(--dark-blue);
            padding: 25px;
            margin: 30px auto;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(255, 193, 7, 0.3);
            text-align: center;
            animation: fadeInUp 1s ease;
            border-left: 8px solid var(--primary-blue);
            border-right: 8px solid var(--accent-green);
        }
        
        .guidelines-banner h3 {
            font-family: 'Montserrat', sans-serif;
            font-size: 1.8rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            color: #000000;
        }
        
        .guidelines-banner p {
            font-size: 1.1rem;
            font-weight: 500;
            margin-bottom: 10px;
            color: #000000;
        }
        
        .guidelines-highlight {
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            border: 3px solid var(--primary-blue);
            animation: pulse 3s infinite;
        }
        
        .guidelines-highlight p {
            color: #000000;
            font-weight: 700;
            font-size: 1.2rem;
            margin: 8px 0;
        }
        
        /* Email Note Section */
        .email-note {
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            color: #000000;
            padding: 20px;
            margin: 25px auto;
            border-radius: 12px;
            border-left: 6px solid var(--accent-green);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            animation: fadeInUp 1s ease;
        }
        
        .email-note h4 {
            font-family: 'Montserrat', sans-serif;
            font-size: 1.3rem;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 10px;
            color: #000000;
        }
        
        .email-note p {
            font-size: 1rem;
            margin-bottom: 8px;
            color: #000000;
            font-weight: 500;
        }
        
        /* Document Status Panel */
        .documents-status {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(255, 248, 225, 0.95));
            color: #000000;
            padding: 25px;
            margin: 25px 0;
            border-radius: 15px;
            border: 3px solid var(--accent-yellow);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            animation: fadeInUp 1s ease;
        }
        
        .documents-status h3 {
            font-family: 'Montserrat', sans-serif;
            font-size: 1.6rem;
            margin-bottom: 20px;
            color: var(--dark-blue);
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .documents-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .document-item {
            background: white;
            padding: 15px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            gap: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            border-left: 4px solid var(--primary-blue);
            transition: all 0.3s ease;
        }
        
        .document-item.completed {
            border-left: 4px solid var(--accent-green);
        }
        
        .document-item.pending {
            border-left: 4px solid var(--accent-yellow);
        }
        
        .document-item i {
            font-size: 1.5rem;
            color: var(--primary-blue);
        }
        
        .document-item.completed i {
            color: var(--accent-green);
        }
        
        .document-item.pending i {
            color: var(--accent-yellow);
        }
        
        .document-info {
            flex: 1;
        }
        
        .document-name {
            font-weight: 600;
            color: var(--dark-blue);
        }
        
        .document-status {
            font-size: 0.9rem;
            color: var(--gray-medium);
        }
        
        /* Main Content */
        .main-content {
            display: grid;
            grid-template-columns: 2.5fr 1fr;
            gap: 40px;
            margin-bottom: 50px;
        }
        
        @media (max-width: 1100px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }
        
        /* Forms Section */
        .forms-section {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
            border: 1px solid rgba(255, 255, 255, 0.2);
            animation: fadeInUp 1s ease forwards;
            opacity: 0;
            animation-delay: 0.3s;
        }
        
        .section-title {
            font-family: 'Montserrat', sans-serif;
            font-size: 1.8rem;
            color: var(--dark-blue);
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 3px solid var(--accent-green);
            position: relative;
        }
        
        .section-title:after {
            content: '';
            position: absolute;
            bottom: -3px;
            left: 0;
            width: 60px;
            height: 3px;
            background: var(--primary-blue);
            animation: slideIn 1s ease forwards;
        }
        
        /* Form Tabs */
        .form-tabs {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-bottom: 35px;
            background: var(--light-blue);
            padding: 15px;
            border-radius: 12px;
        }
        
        .tab-btn {
            padding: 14px 28px;
            background: white;
            border: 2px solid #dee2e6;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            font-size: 1rem;
            color: var(--gray-dark);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            flex: 1;
            min-width: 200px;
            justify-content: center;
        }
        
        .tab-btn.active {
            background: var(--primary-blue);
            color: white;
            border-color: var(--primary-blue);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 86, 179, 0.2);
        }
        
        .tab-btn:hover:not(.active) {
            background: var(--light-blue);
            border-color: var(--primary-blue);
            transform: translateY(-1px);
        }
        
        /* Form Container */
        .form-container {
            display: none;
            animation: fadeInUp 0.5s ease;
        }
        
        .form-container.active {
            display: block;
        }
        
        /* Form Elements */
        .form-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 25px;
        }
        
        @media (max-width: 768px) {
            .form-grid {
                grid-template-columns: 1fr;
            }
        }
        
        .form-group {
            margin-bottom: 25px;
            animation: fadeInUp 0.5s ease forwards;
            opacity: 0;
            animation-fill-mode: forwards;
        }
        
        .form-group:nth-child(1) { animation-delay: 0.1s; }
        .form-group:nth-child(2) { animation-delay: 0.2s; }
        .form-group:nth-child(3) { animation-delay: 0.3s; }
        .form-group:nth-child(4) { animation-delay: 0.4s; }
        .form-group:nth-child(5) { animation-delay: 0.5s; }
        .form-group:nth-child(6) { animation-delay: 0.6s; }
        .form-group:nth-child(7) { animation-delay: 0.7s; }
        .form-group:nth-child(8) { animation-delay: 0.8s; }
        
        .form-group.full-width {
            grid-column: 1 / -1;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: var(--dark-blue);
            font-size: 1rem;
        }
        
        .form-group label .required {
            color: var(--accent-red);
            margin-left: 4px;
        }
        
        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 16px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1rem;
            font-family: 'Poppins', sans-serif;
            transition: all 0.3s;
            background: white;
        }
        
        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--primary-blue);
            box-shadow: 0 0 0 3px rgba(0, 86, 179, 0.1);
            transform: translateY(-2px);
        }
        
        .form-group textarea {
            min-height: 140px;
            resize: vertical;
        }
        
        /* File Upload */
        .file-upload {
            border: 3px dashed #c0c6d0;
            padding: 40px 30px;
            text-align: center;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
            background: var(--gray-light);
        }
        
        .file-upload:hover {
            border-color: var(--primary-blue);
            background: rgba(0, 86, 179, 0.03);
            transform: translateY(-5px);
        }
        
        .file-upload i {
            font-size: 3rem;
            color: var(--primary-blue);
            margin-bottom: 20px;
            opacity: 0.7;
            animation: float 3s ease-in-out infinite;
        }
        
        .file-upload p {
            color: var(--gray-dark);
            margin-bottom: 10px;
            font-size: 1.1rem;
        }
        
        .file-upload .file-size {
            font-size: 0.9rem;
            color: var(--gray-medium);
        }
        
        .file-list {
            margin-top: 20px;
        }
        
        .file-item {
            background: var(--light-blue);
            padding: 15px 20px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 10px;
            border-left: 4px solid var(--primary-blue);
            animation: fadeInLeft 0.5s ease;
        }
        
        .file-item i {
            color: var(--primary-blue);
            font-size: 1.5rem;
        }
        
        .file-info {
            flex: 1;
        }
        
        .file-name {
            font-weight: 600;
            color: var(--dark-blue);
        }
        
        .file-size {
            font-size: 0.9rem;
            color: var(--gray-medium);
        }
        
        .remove-file {
            background: none;
            border: none;
            color: var(--accent-red);
            cursor: pointer;
            font-size: 1.2rem;
            padding: 5px;
            transition: transform 0.3s;
        }
        
        .remove-file:hover {
            transform: scale(1.2);
        }
        
        /* Gmail Submit Button */
        .gmail-submit-btn {
            background: linear-gradient(135deg, #ea4335, #d14836);
            color: white;
            border: none;
            padding: 18px 40px;
            border-radius: 12px;
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
            width: 100%;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            letter-spacing: 0.5px;
            margin-top: 30px;
        }
        
        .gmail-submit-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(234, 67, 53, 0.3);
        }
        
        .gmail-submit-btn:active {
            transform: translateY(-1px);
        }
        
        .gmail-submit-btn:disabled {
            background: linear-gradient(135deg, #cccccc, #aaaaaa);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        /* Submit All Button */
        .submit-all-btn {
            background: linear-gradient(135deg, var(--accent-green), #218838);
            color: white;
            border: none;
            padding: 18px 40px;
            border-radius: 12px;
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
            width: 100%;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            letter-spacing: 0.5px;
            margin-top: 20px;
        }
        
        .submit-all-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(40, 167, 69, 0.3);
        }
        
        /* Info Panel - Enhanced Guidelines */
        .info-panel {
            position: sticky;
            top: 100px;
        }
        
        .info-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            animation: fadeInRight 0.8s ease forwards;
            opacity: 0;
        }
        
        .info-card.guidelines-card {
            border: 4px solid var(--accent-yellow);
            background: linear-gradient(135deg, #fff9e6, #fff3cd);
            box-shadow: 0 15px 35px rgba(255, 193, 7, 0.2);
            animation: pulse 4s infinite;
        }
        
        .info-card:nth-child(1) { animation-delay: 0.2s; }
        .info-card:nth-child(2) { animation-delay: 0.4s; }
        .info-card:nth-child(3) { animation-delay: 0.6s; }
        .info-card:nth-child(4) { animation-delay: 0.8s; }
        
        .info-card h3 {
            font-family: 'Montserrat', sans-serif;
            color: var(--dark-blue);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 1.4rem;
        }
        
        .info-card.guidelines-card h3 {
            color: #000000;
        }
        
        .info-card h3 i {
            color: var(--primary-blue);
            animation: pulse 2s infinite;
        }
        
        .info-card.guidelines-card h3 i {
            color: #000000;
        }
        
        .info-card ul {
            list-style: none;
        }
        
        .info-card li {
            padding: 12px 0;
            border-bottom: 1px solid #eee;
            display: flex;
            align-items: flex-start;
            gap: 12px;
            animation: fadeInLeft 0.5s ease forwards;
            opacity: 0;
        }
        
        /* Key Guidelines - BOLD BLACK TEXT */
        .key-guidelines li {
            color: #000000 !important;
            font-weight: 700 !important;
            font-size: 1rem !important;
            border-bottom: 2px solid #ffeaa7 !important;
        }
        
        .info-card li:nth-child(1) { animation-delay: 0.1s; }
        .info-card li:nth-child(2) { animation-delay: 0.2s; }
        .info-card li:nth-child(3) { animation-delay: 0.3s; }
        .info-card li:nth-child(4) { animation-delay: 0.4s; }
        .info-card li:nth-child(5) { animation-delay: 0.5s; }
        .info-card li:nth-child(6) { animation-delay: 0.6s; }
        
        .info-card li:last-child {
            border-bottom: none;
        }
        
        .info-card li i {
            color: var(--accent-green);
            margin-top: 3px;
            flex-shrink: 0;
            font-size: 1.1rem;
        }
        
        .key-guidelines li i {
            color: #000000 !important;
        }
        
        /* Guidelines Checklist */
        .guidelines-checklist {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            border-left: 6px solid var(--accent-green);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }
        
        .guidelines-checklist h4 {
            color: var(--dark-blue);
            margin-bottom: 15px;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .guidelines-checklist ul {
            list-style: none;
        }
        
        .guidelines-checklist li {
            padding: 10px 0;
            display: flex;
            align-items: center;
            gap: 10px;
            border-bottom: 1px solid #f1f1f1;
            color: #000000;
            font-weight: 600;
        }
        
        .guidelines-checklist li:last-child {
            border-bottom: none;
        }
        
        .guidelines-checklist li i {
            color: var(--accent-green);
            font-size: 1.1rem;
        }
        
        .requirements-list .doc-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            background: var(--light-blue);
            border-radius: 10px;
            margin-bottom: 12px;
            transition: transform 0.3s;
            animation: fadeInRight 0.5s ease forwards;
            opacity: 0;
        }
        
        .requirements-list .doc-item:nth-child(1) { animation-delay: 0.1s; }
        .requirements-list .doc-item:nth-child(2) { animation-delay: 0.2s; }
        .requirements-list .doc-item:nth-child(3) { animation-delay: 0.3s; }
        .requirements-list .doc-item:nth-child(4) { animation-delay: 0.4s; }
        
        .requirements-list .doc-item:hover {
            transform: translateX(5px);
        }
        
        .requirements-list .doc-item i {
            width: 45px;
            height: 45px;
            background: var(--primary-blue);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.2rem;
        }
        
        /* Footer */
        footer {
            background: rgba(0, 38, 77, 0.95);
            padding: 40px 0;
            margin-top: 60px;
            border-top: 5px solid var(--accent-green);
            animation: fadeInUp 1s ease;
        }
        
        .footer-content {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 40px;
        }
        
        @media (max-width: 768px) {
            .footer-content {
                grid-template-columns: 1fr;
                text-align: center;
            }
        }
        
        .footer-section {
            animation: fadeInUp 0.8s ease forwards;
            opacity: 0;
        }
        
        .footer-section:nth-child(1) { animation-delay: 0.1s; }
        .footer-section:nth-child(2) { animation-delay: 0.2s; }
        .footer-section:nth-child(3) { animation-delay: 0.3s; }
        
        .footer-section h4 {
            font-family: 'Montserrat', sans-serif;
            font-size: 1.3rem;
            margin-bottom: 20px;
            color: white;
        }
        
        .footer-section p, .footer-section a {
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 12px;
            display: block;
            text-decoration: none;
            transition: color 0.3s;
        }
        
        .footer-section a:hover {
            color: white;
            text-decoration: underline;
        }
        
        .copyright {
            text-align: center;
            padding-top: 30px;
            margin-top: 30px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.9rem;
            animation: fadeInUp 1s ease;
        }
        
        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 50px;
            max-width: 600px;
            width: 90%;
            text-align: center;
            animation: modalSlideUp 0.5s ease;
            position: relative;
        }
        
        @keyframes modalSlideUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .modal-icon {
            width: 100px;
            height: 100px;
            background: linear-gradient(135deg, var(--accent-green), #218838);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 30px;
            color: white;
            font-size: 3.5rem;
            animation: pulse 2s infinite;
        }
        
        .modal h2 {
            color: var(--dark-blue);
            margin-bottom: 20px;
            font-size: 2.2rem;
        }
        
        .modal p {
            color: var(--gray-dark);
            margin-bottom: 15px;
            font-size: 1.1rem;
        }
        
        .close-modal {
            background: var(--primary-blue);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            font-size: 1.1rem;
            margin-top: 30px;
            transition: all 0.3s;
        }
        
        .close-modal:hover {
            background: var(--secondary-blue);
            transform: translateY(-2px);
        }
        
        /* Loading Overlay */
        .loading-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            z-index: 3000;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            color: white;
            animation: fadeIn 0.3s ease;
        }
        
        .spinner {
            width: 60px;
            height: 60px;
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: var(--accent-green);
            animation: spin 1s ease-in-out infinite;
            margin-bottom: 20px;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Floating Elements Animation */
        .floating-element {
            position: absolute;
            width: 50px;
            height: 50px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            animation: float 6s ease-in-out infinite;
            z-index: -1;
        }
        
        .floating-element:nth-child(1) {
            top: 20%;
            left: 5%;
            width: 30px;
            height: 30px;
            animation-delay: 0s;
        }
        
        .floating-element:nth-child(2) {
            top: 60%;
            right: 10%;
            width: 40px;
            height: 40px;
            animation-delay: 1s;
        }
        
        .floating-element:nth-child(3) {
            bottom: 30%;
            left: 15%;
            width: 25px;
            height: 25px;
            animation-delay: 2s;
        }
        
        /* Responsive */
        @media (max-width: 1024px) {
            .header-content {
                flex-direction: column;
                gap: 20px;
            }
            
            .contact-info {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .hero h2 {
                font-size: 2.5rem;
            }
            
            .floating-element {
                display: none;
            }
            
            .ihr-grid {
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            }
        }
        
        @media (max-width: 768px) {
            .hero h2 {
                font-size: 2rem;
            }
            
            .forms-section {
                padding: 25px;
            }
            
            .tab-btn {
                min-width: 100%;
            }
            
            .guidelines-banner {
                padding: 15px;
                margin: 20px auto;
            }
            
            .guidelines-banner h3 {
                font-size: 1.5rem;
                flex-direction: column;
            }
            
            .ihr-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Floating Background Elements -->
    <div class="floating-element"></div>
    <div class="floating-element"></div>
    <div class="floating-element"></div>
    
    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="spinner"></div>
        <p id="loadingMessage">Processing your submission...</p>
    </div>

    <!-- Header -->
    <header>
        <div class="container header-content">
            <div class="logo-section">
                <div class="logo">
                    <div class="logo-icon">
                        <i class="fas fa-anchor"></i>
                    </div>
                    <div class="logo-text animate-fade-in-left">
                        <h1>PortHealth DSM</h1>
                        <p>Dar es Salaam Maritime Health Services</p>
                    </div>
                </div>
            </div>
            <div class="contact-info animate-fade-in-right">
                <div class="contact-item">
                    <i class="fas fa-envelope"></i>
                    <a href="mailto:porthealthdsm@gmail.com">porthealthdsm@gmail.com</a>
                </div>
                <div class="contact-item">
                    <i class="fas fa-phone"></i>
                    <span>0713248773 - Health Officer In-Charge</span>
                </div>
                <div class="contact-item">
                    <i class="fas fa-map-marker-alt"></i>
                    <span>Dar es Salaam Port</span>
                </div>
            </div>
        </div>
    </header>
    
    <!-- Welcome Section -->
    <div class="container">
        <div class="welcome-section">
            <h2>Welcome to PortHealth DSM Portal</h2>
            <p>Welcome to the Dar es Salaam Port Health Department's official Maritime Health Declaration System. This portal is designed to facilitate the efficient submission of all required health documentation for vessels arriving at Tanzania's premier seaport.</p>
            
            <div class="welcome-highlight">
                <h3><i class="fas fa-shield-alt"></i> Our Mission</h3>
                <p>To safeguard public health while ensuring the smooth flow of international maritime trade through comprehensive health surveillance, timely documentation processing, and strict adherence to International Health Regulations (2005).</p>
            </div>
            
            <p>This system allows you to submit all required maritime health declarations in one seamless process. Complete all forms step-by-step, upload necessary documents, and submit everything with a single click to our dedicated email system.</p>
        </div>
    </div>
    
    <!-- IHR Compliance Section -->
    <div class="container">
        <div class="ihr-section">
            <h3><i class="fas fa-globe"></i> PortHealth DSM & IHR (2005) Compliance</h3>
            <p style="color: var(--gray-dark); margin-bottom: 25px; font-size: 1.1rem;">Our operations are fully compliant with the International Health Regulations (2005) which govern public health measures for international traffic, including maritime transport.</p>
            
            <div class="ihr-grid">
                <div class="ihr-card">
                    <i class="fas fa-passport"></i>
                    <h4>IHR Core Capacities</h4>
                    <p>PortHealth DSM maintains all core capacities required under IHR (2005) including surveillance, response, preparedness, risk communication, and human resource development for effective port health operations.</p>
                </div>
                
                <div class="ihr-card">
                    <i class="fas fa-ship"></i>
                    <h4>Maritime Declaration</h4>
                    <p>All vessels must submit Maritime Declaration of Health as per IHR Annex 8 requirements. Our system streamlines this process while ensuring compliance with international standards.</p>
                </div>
                
                <div class="ihr-card">
                    <i class="fas fa-heartbeat"></i>
                    <h4>Health Measures</h4>
                    <p>We implement health measures recommended by WHO while avoiding unnecessary interference with international traffic and trade, balancing public health protection with economic considerations.</p>
                </div>
                
                <div class="ihr-card">
                    <i class="fas fa-database"></i>
                    <h4>Data Management</h4>
                    <p>All submitted information is handled according to IHR data protection requirements, ensuring confidentiality while enabling effective public health response and surveillance.</p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Guidelines Banner -->
    <div class="container">
        <div class="guidelines-banner">
            <h3>
                <i class="fas fa-exclamation-circle"></i>
                IMPORTANT SUBMISSION GUIDELINES
                <i class="fas fa-exclamation-circle"></i>
            </h3>
            <div class="guidelines-highlight">
                <p><i class="fas fa-clock"></i> <strong>SUBMIT AT LEAST 24 HOURS BEFORE ARRIVAL</strong></p>
                <p><i class="fas fa-file-upload"></i> <strong>MAXIMUM FILE SIZE: 10MB PER DOCUMENT</strong></p>
                <p><i class="fas fa-check-circle"></i> <strong>ACCEPTED FORMATS: PDF, DOC, DOCX, JPG, PNG</strong></p>
            </div>
            <p>Complete ALL forms before final submission to ensure comprehensive documentation</p>
        </div>
    </div>
    
    <!-- Email Note -->
    <div class="container">
        <div class="email-note">
            <h4><i class="fas fa-envelope"></i> Seamless Gmail Submission</h4>
            <p><strong>All documents and form data will be automatically included in your email submission.</strong> The system compiles all completed forms and uploaded files into a single comprehensive email to porthealthdsm@gmail.com.</p>
            <p><i class="fas fa-paperclip"></i> <strong>Automatic Attachments:</strong> All uploaded files are automatically attached to the email. No need to manually attach documents!</p>
            <p><i class="fas fa-user-md"></i> <strong>Health Officer In-Charge:</strong> 0713248773 (Available 24/7 for emergencies)</p>
        </div>
    </div>
    
    <!-- REMOVED: The Documents Status Panel has been moved to below the submission form -->
    
    <div class="container">
        <!-- Main Content -->
        <div class="main-content">
            <!-- Forms Section -->
            <section class="forms-section">
                <h2 class="section-title animate-fade-in-down">Complete Maritime Health Documentation</h2>
                <p style="color: var(--gray-dark); margin-bottom: 30px;" class="animate-fade-in-down" style="animation-delay: 0.1s">Complete ALL forms below for comprehensive submission. All data will be compiled into a single email with automatic attachments.</p>
                
                <!-- Form Tabs -->
                <div class="form-tabs animate-fade-in-down" style="animation-delay: 0.2s">
                    <button class="tab-btn active" data-tab="maritime-declaration">
                        <i class="fas fa-ship"></i> Maritime Declaration
                    </button>
                    <button class="tab-btn" data-tab="health-declaration">
                        <i class="fas fa-heartbeat"></i> Health Declaration
                    </button>
                    <button class="tab-btn" data-tab="sludge-docs">
                        <i class="fas fa-recycle"></i> Waste/Sludge Documents
                    </button>
                    <button class="tab-btn" data-tab="other-docs">
                        <i class="fas fa-file-medical-alt"></i> Other Documents
                    </button>
                </div>
                
                <!-- Maritime Declaration Form -->
                <div class="form-container active" id="maritime-declaration">
                    <form id="maritimeForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label>Vessel Name <span class="required">*</span></label>
                                <input type="text" id="vesselName" required placeholder="Enter vessel name">
                            </div>
                            
                            <div class="form-group">
                                <label>IMO Number <span class="required">*</span></label>
                                <input type="text" id="imoNumber" required placeholder="Enter IMO number">
                            </div>
                            
                            <div class="form-group">
                                <label>Estimated Arrival <span class="required">*</span></label>
                                <input type="datetime-local" id="arrivalDate" required>
                            </div>
                            
                            <div class="form-group">
                                <label>Last Port of Call <span class="required">*</span></label>
                                <input type="text" id="lastPort" required placeholder="Last port visited">
                            </div>
                            
                            <div class="form-group">
                                <label>Number of Crew <span class="required">*</span></label>
                                <input type="number" id="crewCount" min="1" required placeholder="Total crew members">
                            </div>
                            
                            <div class="form-group">
                                <label>Number of Passengers</label>
                                <input type="number" id="passengerCount" min="0" placeholder="Total passengers">
                            </div>
                            
                            <div class="form-group full-width">
                                <label>Additional Information</label>
                                <textarea id="maritimeComments" placeholder="Any special requirements, cargo details, or additional information..."></textarea>
                            </div>
                            
                            <div class="form-group full-width">
                                <label>Upload Maritime Declaration Form <span class="required">*</span></label>
                                <div class="file-upload" id="maritimeUploadArea">
                                    <i class="fas fa-file-upload"></i>
                                    <p>Click to upload Maritime Declaration form</p>
                                    <p class="file-size">PDF, DOC, DOCX formats (Max 10MB)</p>
                                    <input type="file" class="file-input" id="maritimeFile" accept=".pdf,.doc,.docx">
                                </div>
                                <div class="file-list" id="maritimeFileList"></div>
                            </div>
                        </div>
                        
                        <button type="button" class="gmail-submit-btn" onclick="saveFormData('maritime')">
                            <i class="fas fa-save"></i> Save Maritime Declaration
                        </button>
                    </form>
                </div>
                
                <!-- Health Declaration Form -->
                <div class="form-container" id="health-declaration">
                    <form id="healthForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label>Vessel Name <span class="required">*</span></label>
                                <input type="text" id="healthVessel" required placeholder="Enter vessel name">
                            </div>
                            
                            <div class="form-group">
                                <label>Health Status on Board</label>
                                <select id="healthStatusSelect">
                                    <option value="normal">Normal - No health issues</option>
                                    <option value="fever">Fever/Infectious disease cases</option>
                                    <option value="gastro">Gastrointestinal illness</option>
                                    <option value="respiratory">Respiratory illness</option>
                                    <option value="other">Other medical conditions</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label>Number of Ill Persons</label>
                                <input type="number" id="illCount" min="0" value="0">
                            </div>
                            
                            <div class="form-group">
                                <label>Vaccination Compliance</label>
                                <select id="vaccinationStatus">
                                    <option value="compliant">Fully compliant</option>
                                    <option value="partial">Partially compliant</option>
                                    <option value="non-compliant">Non-compliant</option>
                                </select>
                            </div>
                            
                            <div class="form-group full-width">
                                <label>Health Symptoms & Treatment Details</label>
                                <textarea id="symptoms" placeholder="Describe symptoms, onset dates, treatment provided, and current status..."></textarea>
                            </div>
                            
                            <div class="form-group full-width">
                                <label>Vaccination Records</label>
                                <textarea id="vaccinationInfo" placeholder="List vaccinations administered, dates, and certificates..."></textarea>
                            </div>
                            
                            <div class="form-group full-width">
                                <label>Upload Health Documents <span class="required">*</span></label>
                                <div class="file-upload" id="healthUploadArea">
                                    <i class="fas fa-file-medical"></i>
                                    <p>Click to upload Health Declaration forms</p>
                                    <p class="file-size">PDF, DOC, DOCX, JPG, PNG formats (Max 10MB)</p>
                                    <input type="file" class="file-input" id="healthFile" accept=".pdf,.doc,.docx,.jpg,.png" multiple>
                                </div>
                                <div class="file-list" id="healthFileList"></div>
                            </div>
                        </div>
                        
                        <button type="button" class="gmail-submit-btn" onclick="saveFormData('health')">
                            <i class="fas fa-save"></i> Save Health Declaration
                        </button>
                    </form>
                </div>
                
                <!-- Sludge Documents Form -->
                <div class="form-container" id="sludge-docs">
                    <form id="sludgeForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label>Vessel Name <span class="required">*</span></label>
                                <input type="text" id="sludgeVessel" required placeholder="Enter vessel name">
                            </div>
                            
                            <div class="form-group">
                                <label>Type of Waste <span class="required">*</span></label>
                                <select id="sludgeType" required>
                                    <option value="">Select waste type</option>
                                    <option value="bilge">Bilge water/oil mixture</option>
                                    <option value="sewage">Sewage sludge</option>
                                    <option value="oil">Oil sludge</option>
                                    <option value="garbage">Solid garbage waste</option>
                                    <option value="hazardous">Hazardous chemicals</option>
                                    <option value="medical">Medical waste</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label>Quantity (m) <span class="required">*</span></label>
                                <input type="number" id="sludgeQuantity" min="0.1" step="0.1" required placeholder="e.g., 10.5">
                            </div>
                            
                            <div class="form-group">
                                <label>Disposal Date <span class="required">*</span></label>
                                <input type="datetime-local" id="disposalDate" required>
                            </div>
                            
                            <div class="form-group">
                                <label>Disposal Facility <span class="required">*</span></label>
                                <input type="text" id="disposalFacility" required placeholder="Authorized disposal facility">
                            </div>
                            
                            <div class="form-group">
                                <label>MARPOL Annex</label>
                                <select id="marpolAnnex">
                                    <option value="annex1">Annex I - Oil</option>
                                    <option value="annex2">Annex II - Noxious Liquids</option>
                                    <option value="annex4">Annex IV - Sewage</option>
                                    <option value="annex5">Annex V - Garbage</option>
                                    <option value="annex6">Annex VI - Air Pollution</option>
                                </select>
                            </div>
                            
                            <div class="form-group full-width">
                                <label>Additional Waste Information</label>
                                <textarea id="sludgeComments" placeholder="Waste composition, handling procedures, special requirements..."></textarea>
                            </div>
                            
                            <div class="form-group full-width">
                                <label>Upload Waste Documents <span class="required">*</span></label>
                                <div class="file-upload" id="sludgeUploadArea">
                                    <i class="fas fa-recycle"></i>
                                    <p>Click to upload Waste Disposal documents</p>
                                    <p class="file-size">PDF, DOC, DOCX formats (Max 10MB)</p>
                                    <input type="file" class="file-input" id="sludgeFile" accept=".pdf,.doc,.docx" multiple>
                                </div>
                                <div class="file-list" id="sludgeFileList"></div>
                            </div>
                        </div>
                        
                        <button type="button" class="gmail-submit-btn" onclick="saveFormData('sludge')">
                            <i class="fas fa-save"></i> Save Waste Documents
                        </button>
                    </form>
                </div>
                
                <!-- Other Documents Form -->
                <div class="form-container" id="other-docs">
                    <form id="otherForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label>Document Type <span class="required">*</span></label>
                                <select id="docType" required>
                                    <option value="">Select document type</option>
                                    <option value="crew-list">Crew List & Passports</option>
                                    <option value="passenger-list">Passenger Manifest</option>
                                    <option value="vaccination">Vaccination Certificates</option>
                                    <option value="inspection">Inspection Reports</option>
                                    <option value="certificate">Health Certificates</option>
                                    <option value="safety">Safety Certificates</option>
                                    <option value="cargo">Cargo Documents</option>
                                    <option value="other">Other Documents</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label>Vessel Name <span class="required">*</span></label>
                                <input type="text" id="otherVessel" required placeholder="Enter vessel name">
                            </div>
                            
                            <div class="form-group">
                                <label>Urgency Level</label>
                                <select id="urgency">
                                    <option value="normal">Normal (24-48h processing)</option>
                                    <option value="urgent">Urgent (12-24h processing)</option>
                                    <option value="emergency">Emergency (Immediate attention)</option>
                                </select>
                            </div>
                            
                            <div class="form-group full-width">
                                <label>Document Description <span class="required">*</span></label>
                                <textarea id="docDescription" required placeholder="Detailed description of the documents being submitted..."></textarea>
                            </div>
                            
                            <div class="form-group full-width">
                                <label>Special Instructions</label>
                                <textarea id="specialInstructions" placeholder="Any special handling requirements or instructions..."></textarea>
                            </div>
                            
                            <div class="form-group full-width">
                                <label>Upload Documents <span class="required">*</span></label>
                                <div class="file-upload" id="otherUploadArea">
                                    <i class="fas fa-file-alt"></i>
                                    <p>Click to upload required documents</p>
                                    <p class="file-size">PDF, DOC, DOCX, JPG, PNG formats (Max 10MB)</p>
                                    <input type="file" class="file-input" id="otherFile" accept=".pdf,.doc,.docx,.jpg,.png" multiple>
                                </div>
                                <div class="file-list" id="otherFileList"></div>
                            </div>
                        </div>
                        
                        <button type="button" class="gmail-submit-btn" onclick="saveFormData('other')">
                            <i class="fas fa-save"></i> Save Other Documents
                        </button>
                    </form>
                </div>
                
                <!-- Submit All Button -->
                <button type="button" class="submit-all-btn" id="submitAllBtn" onclick="submitAllDocuments()" disabled>
                    <i class="fas fa-paper-plane"></i> Submit All Documents via Gmail
                </button>
                
                <!-- MOVED: Documents Status Panel (Now positioned below submission form) -->
                <div class="documents-status">
                    <h3><i class="fas fa-clipboard-list"></i> Document Completion Status</h3>
                    <p style="color: #000000; margin-bottom: 20px; font-size: 1.1rem;">Track which documents you have completed. Complete all forms for comprehensive submission.</p>
                    
                    <div class="documents-list">
                        <div class="document-item pending" id="maritimeStatus">
                            <i class="fas fa-ship"></i>
                            <div class="document-info">
                                <div class="document-name">Maritime Declaration</div>
                                <div class="document-status">Pending - Complete the form above</div>
                            </div>
                        </div>
                        
                        <div class="document-item pending" id="healthStatus">
                            <i class="fas fa-heartbeat"></i>
                            <div class="document-info">
                                <div class="document-name">Health Declaration</div>
                                <div class="document-status">Pending - Complete the form above</div>
                            </div>
                        </div>
                        
                        <div class="document-item pending" id="sludgeStatus">
                            <i class="fas fa-recycle"></i>
                            <div class="document-info">
                                <div class="document-name">Waste/Sludge Documents</div>
                                <div class="document-status">Pending - Complete the form above</div>
                            </div>
                        </div>
                        
                        <div class="document-item pending" id="otherStatus">
                            <i class="fas fa-file-medical-alt"></i>
                            <div class="document-info">
                                <div class="document-name">Other Documents</div>
                                <div class="document-status">Pending - Complete the form above</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <p style="text-align: center; margin-top: 15px; color: var(--gray-medium); font-size: 0.9rem;">
                    <i class="fas fa-info-circle"></i> Complete all forms above to enable submission
                </p>
            </section>
            
            <!-- Info Panel - Enhanced Guidelines Section -->
            <aside class="info-panel">
                <!-- NEW: Database Access Card -->
                <div class="info-card">
                    <h3><i class="fas fa-database"></i> Office Database Access</h3>
                    <p style="color: var(--gray-dark); font-size: 0.95rem; line-height: 1.6;">
                        For office database management system and authorized port officer for each department:
                        <br><br>
                        <a href="https://jmsellers9.github.io/porthealthdsm/" target="_blank" style="color: var(--primary-blue); font-weight: 600; text-decoration: none;">
                            <i class="fas fa-external-link-alt"></i> Access Database Portal
                        </a>
                        <br><br>
                        <small>Log in password are available at port health office for database log in.</small>
                    </p>
                </div>
                
                <!-- Enhanced Guidelines Card -->
                <div class="info-card guidelines-card">
                    <h3><i class="fas fa-list-check"></i> Submission Checklist</h3>
                    <div class="guidelines-checklist">
                        <h4><i class="fas fa-clipboard-check"></i> Before You Submit:</h4>
                        <ul>
                            <li><i class="fas fa-check"></i> All required fields completed</li>
                            <li><i class="fas fa-check"></i> Documents under 10MB each</li>
                            <li><i class="fas fa-check"></i> Correct file formats (PDF, DOC, JPG, PNG)</li>
                            <li><i class="fas fa-check"></i> Vessel details accurate</li>
                            <li><i class="fas fa-check"></i> Arrival time 24+ hours from now</li>
                        </ul>
                    </div>
                </div>
                
                <!-- Key Guidelines with BOLD BLACK TEXT -->
                <div class="info-card key-guidelines">
                    <h3><i class="fas fa-info-circle"></i> Key Guidelines</h3>
                    <ul>
                        <li><i class="fas fa-clock"></i> Submit 24+ hours before arrival</li>
                        <li><i class="fas fa-file-upload"></i> Maximum file size: 10MB per document</li>
                        <li><i class="fas fa-file-alt"></i> Accepted formats: PDF, DOC, DOCX, JPG, PNG</li>
                        <li><i class="fas fa-check-circle"></i> Ensure all required fields are completed</li>
                        <li><i class="fas fa-copy"></i> Keep copies of all submitted documents</li>
                        <li><i class="fas fa-envelope"></i> Confirmation email sent upon submission</li>
                    </ul>
                </div>
                
                <div class="info-card">
                    <h3><i class="fas fa-clock"></i> Processing Times</h3>
                    <ul>
                        <li><i class="fas fa-clock"></i> <strong>Normal:</strong> 24-48 hours</li>
                        <li><i class="fas fa-exclamation-triangle"></i> <strong>Urgent:</strong> 12-24 hours</li>
                        <li><i class="fas fa-ambulance"></i> <strong>Emergency:</strong> Immediate</li>
                    </ul>
                    <p style="margin-top: 15px; font-size: 0.9rem; color: var(--gray-medium);">
                        <i class="fas fa-phone-alt"></i> Emergency Contact: 0713248773
                    </p>
                </div>
                
                <div class="info-card">
                    <h3><i class="fas fa-file-medical-alt"></i> Required Documents</h3>
                    <div class="requirements-list">
                        <div class="doc-item">
                            <i class="fas fa-ship"></i>
                            <div>
                                <strong>Maritime Declaration</strong>
                                <small>For all arriving vessels</small>
                            </div>
                        </div>
                        <div class="doc-item">
                            <i class="fas fa-heartbeat"></i>
                            <div>
                                <strong>Health Declaration</strong>
                                <small>Crew/passenger health status</small>
                            </div>
                        </div>
                        <div class="doc-item">
                            <i class="fas fa-recycle"></i>
                            <div>
                                <strong>Waste Documents</strong>
                                <small>MARPOL compliance records</small>
                            </div>
                        </div>
                        <div class="doc-item">
                            <i class="fas fa-passport"></i>
                            <div>
                                <strong>Crew List</strong>
                                <small>Passport & vaccination details</small>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="info-card">
                    <h3><i class="fas fa-shield-alt"></i> Data Security</h3>
                    <p style="color: var(--gray-dark); font-size: 0.95rem; line-height: 1.6;">
                        All submissions are encrypted and processed in compliance with:
                    </p>
                    <ul>
                        <li><i class="fas fa-lock"></i> WHO International Health Regulations</li>
                        <li><i class="fas fa-lock"></i> Tanzania Data Protection Act</li>
                        <li><i class="fas fa-lock"></i> GDPR Compliance</li>
                    </ul>
                </div>
            </aside>
        </div>
    </div>
    
    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>PortHealth DSM</h4>
                    <p>Dar es Salaam Maritime Health Services</p>
                    <p><i class="fas fa-map-marker-alt"></i> Dar es Salaam Port, Tanzania</p>
                    <p><i class="fas fa-phone"></i> 0713248773 - Health Officer In-Charge</p>
                    <p><i class="fas fa-envelope"></i> porthealthdsm@gmail.com</p>
                </div>
                
                <div class="footer-section">
                    <h4>Quick Links</h4>
                    <a href="#"><i class="fas fa-file-alt"></i> Submission Guidelines</a>
                    <a href="#"><i class="fas fa-download"></i> Document Templates</a>
                    <a href="#"><i class="fas fa-question-circle"></i> FAQ</a>
                    <a href="#"><i class="fas fa-phone-alt"></i> Emergency Contacts</a>
                </div>
                
                <div class="footer-section">
                    <h4>Regulations</h4>
                    <a href="#"><i class="fas fa-globe"></i> WHO IHR 2005</a>
                    <a href="#"><i class="fas fa-ship"></i> MARPOL Convention</a>
                    <a href="#"><i class="fas fa-gavel"></i> Tanzania Ports Authority</a>
                    <a href="#"><i class="fas fa-shield-alt"></i> Health & Safety</a>
                </div>
            </div>
            
            <div class="copyright">
                <p> 2023 PortHealth DSM - Dar es Salaam Maritime Health Services. All rights reserved.</p>
                <p style="margin-top: 10px; font-size: 0.8rem;">
                    <i class="fas fa-lock"></i> Secure Submission System | Compliant with International Health Regulations
                </p>
            </div>
        </div>
    </footer>
    
    <!-- Success Modal -->
    <div class="modal" id="successModal">
        <div class="modal-content">
            <div class="modal-icon">
                <i class="fas fa-check-circle"></i>
            </div>
            <h2>Submission Successful!</h2>
            <p>All your maritime health documents have been submitted successfully.</p>
            <p><strong>Reference Number:</strong> <span id="referenceNumber">PHDSM-2025-00123</span></p>
            <p>A comprehensive email with all documents and form data has been sent to porthealthdsm@gmail.com</p>
            <p>You will receive a confirmation response within the selected processing time.</p>
            <button class="close-modal" onclick="closeModal()">Close</button>
        </div>
    </div>

    <!-- Error Modal -->
    <div class="modal" id="errorModal">
        <div class="modal-content">
            <div class="modal-icon" style="background: linear-gradient(135deg, var(--accent-red), #c82333);">
                <i class="fas fa-exclamation-triangle"></i>
            </div>
            <h2>Submission Error</h2>
            <p id="errorMessage">There was an error processing your submission.</p>
            <p>Please try again or contact support if the issue persists.</p>
            <button class="close-modal" onclick="closeErrorModal()">Close</button>
        </div>
    </div>

    <script>
        // Configuration
        const RECIPIENT_EMAIL = 'porthealthdsm@gmail.com';
        
        // Data storage for all forms
        let formData = {
            maritime: null,
            health: null,
            sludge: null,
            other: null
        };
        
        let uploadedFiles = {
            maritime: [],
            health: [],
            sludge: [],
            other: []
        };
        
        // Track completion status
        let completionStatus = {
            maritime: false,
            health: false,
            sludge: false,
            other: false
        };
        
        // Form handling
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize animations on scroll
            initAnimations();
            
            // Tab switching
            const tabBtns = document.querySelectorAll('.tab-btn');
            const formContainers = document.querySelectorAll('.form-container');
            
            tabBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    tabBtns.forEach(b => b.classList.remove('active'));
                    formContainers.forEach(fc => fc.classList.remove('active'));
                    
                    btn.classList.add('active');
                    const tabId = btn.getAttribute('data-tab');
                    document.getElementById(tabId).classList.add('active');
                    
                    // Add animation to the active form
                    const activeForm = document.getElementById(tabId);
                    activeForm.classList.add('animate-fade-in-up');
                    
                    // Reset animation after it completes
                    setTimeout(() => {
                        activeForm.classList.remove('animate-fade-in-up');
                    }, 800);
                });
            });
            
            // File upload handling with multiple files support
            setupFileUpload('maritimeUploadArea', 'maritimeFile', 'maritimeFileList', 'maritime');
            setupFileUpload('healthUploadArea', 'healthFile', 'healthFileList', 'health');
            setupFileUpload('sludgeUploadArea', 'sludgeFile', 'sludgeFileList', 'sludge');
            setupFileUpload('otherUploadArea', 'otherFile', 'otherFileList', 'other');
            
            // Set default dates
            const tomorrow = new Date();
            tomorrow.setDate(tomorrow.getDate() + 1);
            document.getElementById('arrivalDate').value = tomorrow.toISOString().slice(0, 16);
            
            const disposalDate = new Date();
            disposalDate.setDate(disposalDate.getDate() + 3);
            document.getElementById('disposalDate').value = disposalDate.toISOString().slice(0, 16);
            
            // Load saved data from localStorage
            loadSavedData();
            
            // Add hover animations to buttons
            const buttons = document.querySelectorAll('button');
            buttons.forEach(button => {
                button.addEventListener('mouseenter', () => {
                    if (!button.disabled) {
                        button.style.transform = 'translateY(-3px)';
                    }
                });
                
                button.addEventListener('mouseleave', () => {
                    button.style.transform = 'translateY(0)';
                });
            });
            
            // Add animation to IHR cards when they come into view
            const ihrCards = document.querySelectorAll('.ihr-card');
            const ihrObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.opacity = '1';
                        entry.target.style.transform = 'translateY(0)';
                        ihrObserver.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.1 });
            
            ihrCards.forEach(card => {
                ihrObserver.observe(card);
            });
        });
        
        function initAnimations() {
            // Add animation classes to elements when they come into view
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            };
            
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('animate-fade-in-up');
                        observer.unobserve(entry.target);
                    }
                });
            }, observerOptions);
            
            // Observe elements that should animate on scroll
            const animateElements = document.querySelectorAll('.form-group, .info-card li, .requirements-list .doc-item');
            animateElements.forEach(el => {
                observer.observe(el);
            });
        }
        
        function setupFileUpload(uploadAreaId, fileInputId, fileListId, formType) {
            const uploadArea = document.getElementById(uploadAreaId);
            const fileInput = document.getElementById(fileInputId);
            const fileList = document.getElementById(fileListId);
            
            uploadArea.addEventListener('click', () => fileInput.click());
            
            fileInput.addEventListener('change', (e) => {
                if (e.target.files.length) {
                    handleFileSelect(e.target.files, fileList, fileInputId, formType);
                }
            });
            
            // Add drag and drop functionality
            uploadArea.addEventListener('dragover', (e) => {
                e.preventDefault();
                uploadArea.style.borderColor = '#0056b3';
                uploadArea.style.transform = 'translateY(-5px)';
            });
            
            uploadArea.addEventListener('dragleave', () => {
                uploadArea.style.borderColor = '#c0c6d0';
                uploadArea.style.transform = 'translateY(0)';
            });
            
            uploadArea.addEventListener('drop', (e) => {
                e.preventDefault();
                uploadArea.style.borderColor = '#c0c6d0';
                uploadArea.style.transform = 'translateY(0)';
                
                if (e.dataTransfer.files.length) {
                    handleFileSelect(e.dataTransfer.files, fileList, fileInputId, formType);
                }
            });
        }
        
        function handleFileSelect(files, fileListElement, inputId, formType) {
            // Clear existing files for this form type
            uploadedFiles[formType] = [];
            
            // Clear file list
            fileListElement.innerHTML = '';
            
            // Process each file
            Array.from(files).forEach(file => {
                if (file.size > 10 * 1024 * 1024) {
                    showError('File size exceeds 10MB limit: ' + file.name);
                    return;
                }
                
                // Store file
                uploadedFiles[formType].push(file);
                
                // Create file item display
                const fileItem = document.createElement('div');
                fileItem.className = 'file-item';
                
                const fileIcon = document.createElement('i');
                if (file.type.includes('image')) {
                    fileIcon.className = 'fas fa-file-image';
                } else if (file.type.includes('pdf')) {
                    fileIcon.className = 'fas fa-file-pdf';
                } else if (file.type.includes('word')) {
                    fileIcon.className = 'fas fa-file-word';
                } else {
                    fileIcon.className = 'fas fa-file';
                }
                
                const fileInfo = document.createElement('div');
                fileInfo.className = 'file-info';
                
                const fileName = document.createElement('div');
                fileName.className = 'file-name';
                fileName.textContent = file.name;
                
                const fileSize = document.createElement('div');
                fileSize.className = 'file-size';
                fileSize.textContent = formatFileSize(file.size);
                
                const removeBtn = document.createElement('button');
                removeBtn.className = 'remove-file';
                removeBtn.innerHTML = '<i class="fas fa-times"></i>';
                removeBtn.addEventListener('click', () => {
                    // Remove file from array
                    uploadedFiles[formType] = uploadedFiles[formType].filter(f => f !== file);
                    
                    // Add removal animation
                    fileItem.style.transform = 'translateX(-100%)';
                    fileItem.style.opacity = '0';
                    
                    setTimeout(() => {
                        fileItem.remove();
                        // Clear file input
                        document.getElementById(inputId).value = '';
                    }, 300);
                });
                
                fileInfo.appendChild(fileName);
                fileInfo.appendChild(fileSize);
                fileItem.appendChild(fileIcon);
                fileItem.appendChild(fileInfo);
                fileItem.appendChild(removeBtn);
                
                fileListElement.appendChild(fileItem);
                
                // Add success animation
                fileItem.style.transform = 'translateX(-100%)';
                fileItem.style.opacity = '0';
                
                setTimeout(() => {
                    fileItem.style.transition = 'transform 0.5s ease, opacity 0.5s ease';
                    fileItem.style.transform = 'translateX(0)';
                    fileItem.style.opacity = '1';
                }, 10);
            });
        }
        
        function formatFileSize(bytes) {
            if (bytes < 1024) return bytes + ' bytes';
            else if (bytes < 1048576) return (bytes / 1024).toFixed(1) + ' KB';
            else return (bytes / 1048576).toFixed(1) + ' MB';
        }
        
        // Save form data
        function saveFormData(formType) {
            let data = {};
            let isValid = true;
            let errorMessage = '';
            
            // Get form data based on form type
            if (formType === 'maritime') {
                data = getMaritimeFormData();
                isValid = validateMaritimeForm(data);
                if (!isValid) errorMessage = 'Please complete all required fields in Maritime Declaration';
            }
            else if (formType === 'health') {
                data = getHealthFormData();
                isValid = validateHealthForm(data);
                if (!isValid) errorMessage = 'Please complete all required fields in Health Declaration';
            }
            else if (formType === 'sludge') {
                data = getSludgeFormData();
                isValid = validateSludgeForm(data);
                if (!isValid) errorMessage = 'Please complete all required fields in Waste Documents';
            }
            else if (formType === 'other') {
                data = getOtherFormData();
                isValid = validateOtherForm(data);
                if (!isValid) errorMessage = 'Please complete all required fields in Other Documents';
            }
            
            if (!isValid) {
                showError(errorMessage);
                return;
            }
            
            // Save data
            formData[formType] = data;
            completionStatus[formType] = true;
            
            // Update UI
            updateDocumentStatus(formType);
            updateSubmitButton();
            
            // Save to localStorage
            saveToLocalStorage();
            
            // Show success message
            showLoading('Saving ' + formType + ' data...');
            setTimeout(() => {
                hideLoading();
                alert(formType.charAt(0).toUpperCase() + formType.slice(1) + ' data saved successfully!');
            }, 500);
        }
        
        // Update document status
        function updateDocumentStatus(formType) {
            const statusElement = document.getElementById(formType + 'Status');
            if (statusElement) {
                statusElement.classList.remove('pending');
                statusElement.classList.add('completed');
                statusElement.querySelector('.document-status').textContent = 'Completed ';
            }
        }
        
        // Update submit button
        function updateSubmitButton() {
            const allCompleted = Object.values(completionStatus).every(status => status === true);
            const submitBtn = document.getElementById('submitAllBtn');
            
            if (allCompleted) {
                submitBtn.disabled = false;
                submitBtn.innerHTML = '<i class="fas fa-paper-plane"></i> Submit All Documents via Gmail';
            } else {
                submitBtn.disabled = true;
                submitBtn.innerHTML = '<i class="fas fa-lock"></i> Complete All Forms First';
            }
        }
        
        // Submit all documents - FIXED EMAIL FUNCTIONALITY
        async function submitAllDocuments() {
            try {
                showLoading('Compiling all documents and data for submission...');
                
                // Check if all forms are completed
                const allCompleted = Object.values(completionStatus).every(status => status === true);
                if (!allCompleted) {
                    hideLoading();
                    showError('Please complete all forms before submission.');
                    return;
                }
                
                // Validate that we have at least one file uploaded
                let totalFiles = 0;
                for (const formType in uploadedFiles) {
                    totalFiles += uploadedFiles[formType].length;
                }
                
                if (totalFiles === 0) {
                    hideLoading();
                    showError('Please upload at least one document before submission.');
                    return;
                }
                
                // Create comprehensive email content
                const subject = `MARITIME HEALTH DECLARATION - ${formData.maritime.vesselName} (IMO: ${formData.maritime.imoNumber})`;
                const body = createComprehensiveEmailBody();
                
                // Prepare files for attachment - we'll use a different approach
                const allFiles = [];
                const fileNames = [];
                
                // Collect all files from all forms
                for (const formType in uploadedFiles) {
                    uploadedFiles[formType].forEach(file => {
                        allFiles.push(file);
                        fileNames.push(file.name);
                    });
                }
                
                // NEW APPROACH: Use FormData to simulate email submission
                // We'll create a download link for all data and guide the user
                hideLoading();
                
                // Create a downloadable zip/text file with all form data
                const textBlob = new Blob([body], { type: 'text/plain' });
                const textUrl = URL.createObjectURL(textBlob);
                
                // Create detailed instructions for the user
                const instructions = `
IMPORTANT SUBMISSION INSTRUCTIONS:

1. All your form data has been prepared for submission.
2. A text file with all form data has been downloaded to your computer.
3. To complete your submission:

   a) Open your email client (Gmail, Outlook, etc.)
   b) Create a new email to: ${RECIPIENT_EMAIL}
   c) Subject: ${subject}
   d) Copy and paste the form data from the downloaded file into the email body
   e) ATTACH THE FOLLOWING FILES:
${fileNames.map(name => `       ${name}`).join('\n')}
   f) Send the email

4. Keep the downloaded text file for your records.

If you need assistance, contact Health Officer In-Charge: 0713248773
                `;
                
                alert(instructions);
                
                // Create download link for the text file
                const downloadLink = document.createElement('a');
                downloadLink.href = textUrl;
                downloadLink.download = `PortHealth_Submission_${formData.maritime.vesselName}_${new Date().toISOString().slice(0, 10)}.txt`;
                document.body.appendChild(downloadLink);
                downloadLink.click();
                document.body.removeChild(downloadLink);
                
                // Release the object URL
                setTimeout(() => {
                    URL.revokeObjectURL(textUrl);
                }, 1000);
                
                // Show success modal after a delay
                setTimeout(() => {
                    showSuccessModal();
                }, 2000);
                
            } catch (error) {
                hideLoading();
                showError('Failed to prepare submission. Please try again or contact support.');
                console.error('Submission error:', error);
            }
        }
        
        // Create comprehensive email body
        function createComprehensiveEmailBody() {
            return `PORTHEALTH DSM - MARITIME HEALTH DECLARATION SUBMISSION
==================================================================

VESSEL INFORMATION:
===================
- Vessel Name: ${formData.maritime.vesselName}
- IMO Number: ${formData.maritime.imoNumber}
- Estimated Arrival: ${new Date(formData.maritime.arrivalDate).toLocaleString()}
- Last Port of Call: ${formData.maritime.lastPort}
- Crew Count: ${formData.maritime.crewCount}
- Passenger Count: ${formData.maritime.passengerCount || '0'}

Additional Maritime Information:
${formData.maritime.comments || 'None provided'}

HEALTH DECLARATION:
===================
- Vessel Name: ${formData.health.vesselName}
- Health Status: ${formData.health.healthStatus}
- Ill Persons: ${formData.health.illCount}
- Vaccination Compliance: ${formData.health.vaccinationStatus}

Health Details:
${formData.health.symptoms || 'No symptoms reported'}

Vaccination Records:
${formData.health.vaccinationInfo || 'Not provided'}

WASTE DISPOSAL INFORMATION:
===========================
- Vessel Name: ${formData.sludge.vesselName}
- Waste Type: ${formData.sludge.sludgeType}
- Quantity: ${formData.sludge.quantity} m
- Disposal Date: ${new Date(formData.sludge.disposalDate).toLocaleString()}
- Disposal Facility: ${formData.sludge.disposalFacility}
- MARPOL Annex: ${formData.sludge.marpolAnnex}

Additional Waste Information:
${formData.sludge.comments || 'None provided'}

OTHER DOCUMENTS:
================
- Document Type: ${formData.other.docType}
- Vessel Name: ${formData.other.vesselName}
- Urgency Level: ${formData.other.urgency}
- Description: ${formData.other.description}

Special Instructions:
${formData.other.instructions || 'None provided'}

ATTACHED FILES:
===============
${getAttachedFilesList()}

SUBMISSION DETAILS:
===================
- Submitted via PortHealth DSM Portal
- Submission Date: ${new Date().toLocaleString()}
- Reference Number: PHDSM-${new Date().getFullYear()}-${Math.floor(10000 + Math.random() * 90000)}
- Health Officer In-Charge: 0713248773

==================================================================
This is an automated submission from the PortHealth DSM Maritime Health Declaration System.
All information is submitted in compliance with International Health Regulations (2005).`;
        }
        
        function getAttachedFilesList() {
            let fileList = '';
            for (const formType in uploadedFiles) {
                if (uploadedFiles[formType].length > 0) {
                    const formTypeName = formType.charAt(0).toUpperCase() + formType.slice(1);
                    fileList += `${formTypeName} Documents:\n`;
                    uploadedFiles[formType].forEach(file => {
                        fileList += `   ${file.name} (${formatFileSize(file.size)})\n`;
                    });
                }
            }
            return fileList || 'No files attached';
        }
        
        // Form data getters
        function getMaritimeFormData() {
            return {
                vesselName: document.getElementById('vesselName').value,
                imoNumber: document.getElementById('imoNumber').value,
                arrivalDate: document.getElementById('arrivalDate').value,
                lastPort: document.getElementById('lastPort').value,
                crewCount: document.getElementById('crewCount').value,
                passengerCount: document.getElementById('passengerCount').value,
                comments: document.getElementById('maritimeComments').value
            };
        }
        
        function getHealthFormData() {
            return {
                vesselName: document.getElementById('healthVessel').value,
                healthStatus: document.getElementById('healthStatusSelect').value,
                illCount: document.getElementById('illCount').value,
                vaccinationStatus: document.getElementById('vaccinationStatus').value,
                symptoms: document.getElementById('symptoms').value,
                vaccinationInfo: document.getElementById('vaccinationInfo').value
            };
        }
        
        function getSludgeFormData() {
            return {
                vesselName: document.getElementById('sludgeVessel').value,
                sludgeType: document.getElementById('sludgeType').value,
                quantity: document.getElementById('sludgeQuantity').value,
                disposalDate: document.getElementById('disposalDate').value,
                disposalFacility: document.getElementById('disposalFacility').value,
                marpolAnnex: document.getElementById('marpolAnnex').value,
                comments: document.getElementById('sludgeComments').value
            };
        }
        
        function getOtherFormData() {
            return {
                docType: document.getElementById('docType').value,
                vesselName: document.getElementById('otherVessel').value,
                urgency: document.getElementById('urgency').value,
                description: document.getElementById('docDescription').value,
                instructions: document.getElementById('specialInstructions').value
            };
        }
        
        // Form validation functions
        function validateMaritimeForm(formData) {
            return formData.vesselName && 
                   formData.imoNumber && 
                   formData.arrivalDate && 
                   formData.lastPort && 
                   formData.crewCount;
        }
        
        function validateHealthForm(formData) {
            return formData.vesselName;
        }
        
        function validateSludgeForm(formData) {
            return formData.vesselName && 
                   formData.sludgeType && 
                   formData.quantity && 
                   formData.disposalDate && 
                   formData.disposalFacility;
        }
        
        function validateOtherForm(formData) {
            return formData.docType && 
                   formData.vesselName && 
                   formData.description;
        }
        
        // LocalStorage functions
        function saveToLocalStorage() {
            const saveData = {
                formData: formData,
                completionStatus: completionStatus
            };
            localStorage.setItem('portHealthSubmission', JSON.stringify(saveData));
        }
        
        function loadSavedData() {
            const savedData = localStorage.getItem('portHealthSubmission');
            if (savedData) {
                try {
                    const data = JSON.parse(savedData);
                    formData = data.formData || formData;
                    completionStatus = data.completionStatus || completionStatus;
                    
                    // Update UI based on saved data
                    for (const formType in completionStatus) {
                        if (completionStatus[formType]) {
                            updateDocumentStatus(formType);
                        }
                    }
                    updateSubmitButton();
                    
                    // Populate form fields with saved data
                    populateFormFields();
                } catch (e) {
                    console.error('Error loading saved data:', e);
                }
            }
        }
        
        function populateFormFields() {
            // Maritime form
            if (formData.maritime) {
                document.getElementById('vesselName').value = formData.maritime.vesselName || '';
                document.getElementById('imoNumber').value = formData.maritime.imoNumber || '';
                document.getElementById('arrivalDate').value = formData.maritime.arrivalDate || '';
                document.getElementById('lastPort').value = formData.maritime.lastPort || '';
                document.getElementById('crewCount').value = formData.maritime.crewCount || '';
                document.getElementById('passengerCount').value = formData.maritime.passengerCount || '';
                document.getElementById('maritimeComments').value = formData.maritime.comments || '';
            }
            
            // Health form
            if (formData.health) {
                document.getElementById('healthVessel').value = formData.health.vesselName || '';
                document.getElementById('healthStatusSelect').value = formData.health.healthStatus || 'normal';
                document.getElementById('illCount').value = formData.health.illCount || '0';
                document.getElementById('vaccinationStatus').value = formData.health.vaccinationStatus || 'compliant';
                document.getElementById('symptoms').value = formData.health.symptoms || '';
                document.getElementById('vaccinationInfo').value = formData.health.vaccinationInfo || '';
            }
            
            // Sludge form
            if (formData.sludge) {
                document.getElementById('sludgeVessel').value = formData.sludge.vesselName || '';
                document.getElementById('sludgeType').value = formData.sludge.sludgeType || '';
                document.getElementById('sludgeQuantity').value = formData.sludge.quantity || '';
                document.getElementById('disposalDate').value = formData.sludge.disposalDate || '';
                document.getElementById('disposalFacility').value = formData.sludge.disposalFacility || '';
                document.getElementById('marpolAnnex').value = formData.sludge.marpolAnnex || 'annex1';
                document.getElementById('sludgeComments').value = formData.sludge.comments || '';
            }
            
            // Other form
            if (formData.other) {
                document.getElementById('docType').value = formData.other.docType || '';
                document.getElementById('otherVessel').value = formData.other.vesselName || '';
                document.getElementById('urgency').value = formData.other.urgency || 'normal';
                document.getElementById('docDescription').value = formData.other.description || '';
                document.getElementById('specialInstructions').value = formData.other.instructions || '';
            }
        }
        
        function showLoading(message) {
            document.getElementById('loadingOverlay').style.display = 'flex';
            document.getElementById('loadingMessage').textContent = message;
        }
        
        function hideLoading() {
            document.getElementById('loadingOverlay').style.display = 'none';
        }
        
        function showSuccessModal() {
            // Generate a reference number
            const refNumber = 'PHDSM-' + new Date().getFullYear() + '-' + 
                            Math.floor(10000 + Math.random() * 90000);
            document.getElementById('referenceNumber').textContent = refNumber;
            document.getElementById('successModal').style.display = 'flex';
            
            // Clear local storage after successful submission
            localStorage.removeItem('portHealthSubmission');
            
            // Reset form data
            formData = { maritime: null, health: null, sludge: null, other: null };
            completionStatus = { maritime: false, health: false, sludge: false, other: false };
            uploadedFiles = { maritime: [], health: [], sludge: [], other: [] };
            
            // Reset UI
            updateSubmitButton();
            resetDocumentStatus();
            
            // Reset form fields
            document.querySelectorAll('form').forEach(form => form.reset());
        }
        
        function resetDocumentStatus() {
            const statusElements = ['maritimeStatus', 'healthStatus', 'sludgeStatus', 'otherStatus'];
            statusElements.forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    element.classList.remove('completed');
                    element.classList.add('pending');
                    element.querySelector('.document-status').textContent = 'Pending - Complete the form above';
                }
            });
        }
        
        function showError(message) {
            document.getElementById('errorMessage').textContent = message;
            document.getElementById('errorModal').style.display = 'flex';
        }
        
        function closeModal() {
            document.getElementById('successModal').style.display = 'none';
        }
        
        function closeErrorModal() {
            document.getElementById('errorModal').style.display = 'none';
        }
    </script>
</body>
</html>